# 多线程总结

### 1.什么是多线程？

有了多线程，可以让程序做多件事情

### 2.多线程的作用？

提高效率

### 3.多线程的应用场景？

只要你想要多个事情同时运行就需要用到多线程

比如：软件中的耗时操作，所有的聊天软件，所有的服务器

### 4.并发和并行

并发：在同一时刻，有多个指令在单个CPU上`交替`执行

并行：在同一时刻，有多个指令在多个CPU上`同时`执行

### 5.守护线程

`备胎线程`

当其他的非守护线程执行完毕后 ，守护线程会陆续结束（没执行完就结束了）

女神嫁人了，备胎就没有存在的必要了

### 6.多线程常用方法

- setName;getName：设置名；获取名
- Thread.currentThread()：获取当前线程
- Thread.sleep(100)：休眠
- setPriority(1)：设置优先级
- getPriority(1)：获取优先级
- setDaemon：设置守护线程
- Thread.yield()：让出线程，让出CPU
- join：插入线程，抢占CPU

### 7.线程的生命周期

新建，阻塞，就绪，执行，死亡 五态模型

### 8.同步代码块细节

```java
@Override
public void run() {
  while (true) {
      synchronized (MyThread.class){
          if (ticket < 100) {
              try {
                  Thread.sleep(100);
              } catch (InterruptedException e) {
                  throw new RuntimeException(e);
              }
              ticket++;
              System.out.println(getName() + "卖出了第" + ticket + "张票！！！！");
          }else break;
      }
  }
}
```

1. 锁synchronized要放在循环内部
2. 锁对象MyThread.class可以任意但必须唯一，此处MyThread.class是唯一的

### 9.线程的六个状态

<img src="assets\image-20250302162736498.png" alt="image-20250302162736498" style="zoom:50%;" />

### 10.线程池主要核心原理

①创建一个池子，池子中是空的
②提交任务时，池子会创建新的线程对象，任务执行完毕，线程归还给池子。下回再次提交任务时，不需要创建新的线程，直接复用已有的线程即可
③但是如果提交任务时，池子中没有空闲线程，也无法创建新的线程，任务就会排队等待

### 11.自定义线程池核心要素

![image-20250302170242247](assets\image-20250302170242247.png)

### 12.自定义线程池小结

1. 创建一个空的池子
2. 有任务提交时，线程池会创建线程去执行任务，执行完毕归还线程

**不断的提交任务，会有以下三个临界点：**
1. 当核心线程满时，再提交任务就会排队
2. 当核心线程满，队伍满时，会创建临时线程
3. 当核心线程满，队伍满，临时线程满时，会触发任务拒绝策略

### 13.线程大小计算

![image-20250302172254775](assets\image-20250302172254775.png)
